<div class="container">
    <div class="row">
        <div class="col-md-offset-3 col-md-6">
			<% if flash[:warning] %>
			    <p class="alert alert-danger"><%= flash[:warning] %></p>
			<% end %>

			<h1>ユーザ編集</h1>
			<br>
			<br>
			<%= form_with model: @user, local: true  do |f| %>
			  <label>プロフィール画像</label>
			  <%= f.file_field :image, class: "", id: :imgInp %><br>
			  <img id="imgPre" src="#" alt="your image" />
			  <label>ユーザ名</label>
			  <%= f.text_field :user_name %><br>
			  <%= f.submit "更新" %>
			<% end %>
		</div>
	</div>
</div>

<script>
$(function() {
 function readURL(input) {
   if (input.files && input.files[0]) {
     var reader = new FileReader();
     reader.onload = function (e) {
       $('#imgPre').attr('src', e.target.result);
     }
     reader.readAsDataURL(input.files[0]);
   }
 }
 $("#imgInp").change(function(){
   readURL(this);
 });
});
</script>