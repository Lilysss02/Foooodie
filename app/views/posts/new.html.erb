<% if flash[:warning] %>
    <p class="alert alert-danger"><%= flash[:warning] %></p>
<% end %>

<div class="container">
    <div class="row">
        <div class="col-md-offset-3 col-md-6">
            <h1>新規投稿</h1>
            <br>
            <br>
            <div class="images-field clearfix">
                <%= form_with model: @post, local: true  do |f| %>
                <div  class="field">
                	<label>レポート写真</label>
                	<%= f.file_field :images, multiple: true, class: "file-input", id: :imgInp %>
                </div>
                <br>

                <% if @post.images.attached? %>
                	<% @post.images.each do |image| %>
                		<%= image_tag image.variant(resize: "200x200") %>
                	<% end %>
                <% end %>
                <img id="imgPre" src="#" alt="your image" />
                <br>

            	  <label>タイトル</label>
            	  <%= f.text_field :title %><br>
            	  <label>本文</label>
            	  <%= f.text_area :body %><br>
            	  <label>価格帯</label>
            	  <%= f.collection_select :price_id, Price.all, :id, :price_range %>
            	  <%= f.submit "投稿" %>
            	<% end %>
            </div>
        </div>
    </div>
</div>

<script>
$(function() {
 function readURL(input) {
   if (input.files && input.files[0]) {
     var reader = new FileReader();
     reader.onload = function (e) {
       $('#imgPre').attr('src', e.target.result);
     }
     reader.readAsDataURL(input.files[0]);
   }
 }
 $("#imgInp").change(function(){
   readURL(this);
 });
});
</script>